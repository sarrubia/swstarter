import{r as p,j as r,a as q}from"./app-G9wkPpou.js";/* empty css            */function R({onClick:e,isLoading:t}){const[s,h]=p.useState(""),[i,m]=p.useState("people"),l=()=>{try{e(s,i)}catch(o){console.error(o)}};return r.jsx("div",{children:r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("form",{children:[r.jsx("div",{className:"row mb-3",children:r.jsx("div",{className:"col",children:r.jsx("p",{children:"What are you searching for?"})})}),r.jsx("div",{className:"row mb-3",children:r.jsxs("div",{className:"col",children:[r.jsxs("div",{className:"form-check form-check-inline",children:[r.jsx("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"radioPeople",value:"people",checked:i==="people",onChange:o=>m(o.target.value)}),r.jsx("label",{className:"form-check-label",htmlFor:"radioPeople",children:"People"})]}),r.jsxs("div",{className:"form-check form-check-inline",children:[r.jsx("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"radioFilms",value:"films",checked:i==="films",onChange:o=>m(o.target.value)}),r.jsx("label",{className:"form-check-label",htmlFor:"radioFilms",children:"Movies"})]})]})}),r.jsx("div",{className:"row mb-3",children:r.jsx("div",{className:"col",children:r.jsx("div",{className:"form-text",children:r.jsx("input",{type:"text",className:"form-control",id:"searchText",placeholder:"e.g. Chewbacca, Yoda, Boba Fett",value:s,onChange:o=>h(o.target.value)})})})}),r.jsx("div",{className:"row mb-3",children:r.jsx("div",{className:"col",children:r.jsx("div",{className:"d-grid gap-2",children:r.jsx("button",{type:"button",className:"btn btn-swstarter",onClick:l,disabled:t,children:t?"SEARCHING...":"SEARCH"})})})})]})})})})}function D(e){return e.title!==void 0&&typeof e.title=="string"}function I({item:e}){return r.jsxs("div",{className:"row  align-items-center search-results-item",children:[r.jsx("div",{className:"col-8",children:r.jsx("h3",{className:"search-results-item-title",children:D(e)?e.title:e.name})}),r.jsx("div",{className:"col-4",children:r.jsx("button",{type:"button",className:"btn btn-success",children:"SEE DETAILS"})})]},e.uid)}function B({data:e,isLoading:t,error:s}){function h(){return s!=null&&s!==""?r.jsx("p",{children:s}):r.jsx("span",{})}function i(){return t?r.jsx("div",{className:"card-body-align-vertical",children:r.jsx("div",{className:"row",children:r.jsx("div",{className:"col-12 color-gray text-bold",children:"Searching..."})})}):r.jsx("p",{})}function m(){return t?r.jsx("div",{}):e&&e.length>0?r.jsx("div",{className:"row",children:r.jsx("div",{className:"col-12",children:e.map(l=>r.jsx(I,{item:l}))})}):r.jsx("div",{className:"card-body-align-vertical",children:r.jsx("div",{className:"row align-items-end",children:r.jsxs("div",{className:"col-12 color-gray text-bold",children:[r.jsx("p",{children:"There are zero matches."}),r.jsx("p",{children:"Use the form to search for people or movies"})]})})})}return r.jsx("div",{className:"card search-results",children:r.jsxs("div",{className:"card-body",children:[r.jsx("div",{className:"row",children:r.jsx("div",{className:"col-12",children:r.jsx("div",{className:"row search-results-title",children:r.jsx("div",{className:"col-12",children:r.jsx("h2",{children:"Results:"})})})})}),r.jsx(m,{}),r.jsx(i,{}),r.jsx(h,{})]})})}let v={};const y=e=>{if(!e||!e.query&&!e.mergeQuery)return"";const t=e.query??e.mergeQuery,s=e.mergeQuery!==void 0,h=l=>l===!0?"1":l===!1?"0":l.toString(),i=new URLSearchParams(s&&typeof window<"u"?window.location.search:"");for(const l in t){if(t[l]===void 0||t[l]===null){i.delete(l);continue}if(Array.isArray(t[l]))i.has(`${l}[]`)&&i.delete(`${l}[]`),t[l].forEach(o=>{i.append(`${l}[]`,o.toString())});else if(typeof t[l]=="object"){i.forEach((o,x)=>{x.startsWith(`${l}[`)&&i.delete(x)});for(const o in t[l])typeof t[l][o]>"u"||["string","number","boolean"].includes(typeof t[l][o])&&i.set(`${l}[${o}]`,h(t[l][o]))}else i.set(l,h(t[l]))}const m=i.toString();return m.length>0?`?${m}`:""},P=e=>{const t={...e??{}};for(const s in v)t[s]===void 0&&v[s]!==void 0&&(t[s]=v[s]);return t},n=e=>({url:n.url(e),method:"get"});n.definition={methods:["get","head"],url:"/api/films"};n.url=e=>n.definition.url+y(e);n.get=e=>({url:n.url(e),method:"get"});n.head=e=>({url:n.url(e),method:"head"});const N=e=>({action:n.url(e),method:"get"});N.get=e=>({action:n.url(e),method:"get"});N.head=e=>({action:n.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});n.form=N;const a=(e,t)=>({url:a.url(e,t),method:"get"});a.definition={methods:["get","head"],url:"/api/films/{id}"};a.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=P(e);const s={id:e.id};return a.definition.url.replace("{id}",s.id.toString()).replace(/\/+$/,"")+y(t)};a.get=(e,t)=>({url:a.url(e,t),method:"get"});a.head=(e,t)=>({url:a.url(e,t),method:"head"});const b=(e,t)=>({action:a.url(e,t),method:"get"});b.get=(e,t)=>({action:a.url(e,t),method:"get"});b.head=(e,t)=>({action:a.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});a.form=b;const $={get:n,getById:a},c=e=>({url:c.url(e),method:"get"});c.definition={methods:["get","head"],url:"/api/people"};c.url=e=>c.definition.url+y(e);c.get=e=>({url:c.url(e),method:"get"});c.head=e=>({url:c.url(e),method:"head"});const w=e=>({action:c.url(e),method:"get"});w.get=e=>({action:c.url(e),method:"get"});w.head=e=>({action:c.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});c.form=w;const d=(e,t)=>({url:d.url(e,t),method:"get"});d.definition={methods:["get","head"],url:"/api/people/{id}"};d.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=P(e);const s={id:e.id};return d.definition.url.replace("{id}",s.id.toString()).replace(/\/+$/,"")+y(t)};d.get=(e,t)=>({url:d.url(e,t),method:"get"});d.head=(e,t)=>({url:d.url(e,t),method:"head"});const S=(e,t)=>({action:d.url(e,t),method:"get"});S.get=(e,t)=>({action:d.url(e,t),method:"get"});S.head=(e,t)=>({action:d.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});d.form=S;const Q={get:c,getById:d},u=e=>({url:u.url(e),method:"get"});u.definition={methods:["get","head"],url:"/api/stats"};u.url=e=>u.definition.url+y(e);u.get=e=>({url:u.url(e),method:"get"});u.head=e=>({url:u.url(e),method:"head"});const C=e=>({action:u.url(e),method:"get"});C.get=e=>({action:u.url(e),method:"get"});C.head=e=>({action:u.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});u.form=C;const A={get:u},F={FilmsController:Object.assign($,$),PeopleController:Object.assign(Q,Q),StatsController:Object.assign(A,A)},k={Controllers:Object.assign(F,F)},H={Http:Object.assign(k,k)};class O{api;constructor(){this.api=q.create({headers:{"Content-Type":"application/json"}})}async getFilms(t){try{return(await this.api.get(`${H.Http.Controllers.FilmsController.get().url}?title=${t}`)).data}catch(s){throw console.error("Error fetching movies:",s),s}}}class _{api;constructor(){this.api=q.create({headers:{"Content-Type":"application/json"}})}async getPeople(t){try{return(await this.api.get(`${H.Http.Controllers.PeopleController.get().url}?name=${t}`)).data}catch(s){throw console.error("Error fetching people:",s),s}}}function U(){const[e,t]=p.useState({}),[s,h]=p.useState(""),[i,m]=p.useState(!1),l=new O,o=new _,x=async(j,E)=>{if(!j||!E){h("Please enter a text to search or choose between Movie or People.");return}m(!0),h("");try{E==="people"?o.getPeople(j).then(f=>{t(f)}).finally(()=>m(!1)):l.getFilms(j).then(f=>{t(f)}).catch(f=>{throw console.log(f),new Error(`error fetching ${j}!`)}).finally(()=>m(!1))}catch(g){g instanceof Error?h(g.message):h(`Error= ${g}`)}};return r.jsxs("div",{children:[r.jsx("nav",{className:"navbar bg-body-tertiary navbar-swstarter",children:r.jsx("div",{className:"container-fluid",children:r.jsx("span",{className:"navbar-brand mb-0 h1",children:"SWStarter"})})}),r.jsx("div",{className:"container text-center search-container",children:r.jsxs("div",{className:"row align-items-start",children:[r.jsx("div",{className:"col-4",children:r.jsx(R,{onClick:x,isLoading:i})}),r.jsx("div",{className:"col-8",children:e&&r.jsx(B,{data:e,isLoading:i,error:s})})]})})]})}export{U as default};
