import{r as p,j as r,a as q}from"./app-BhNxulvM.js";/* empty css            */function R({onClick:e,isLoading:t}){const[s,o]=p.useState(""),[i,m]=p.useState("people"),l=()=>{try{e(s,i)}catch(n){console.error(n)}};return r.jsx("div",{children:r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("form",{children:[r.jsx("div",{className:"row mb-3",children:r.jsx("div",{className:"col",children:r.jsx("p",{children:"What are you searching for?"})})}),r.jsx("div",{className:"row mb-3",children:r.jsxs("div",{className:"col",children:[r.jsxs("div",{className:"form-check form-check-inline",children:[r.jsx("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"radioPeople",value:"people",checked:i==="people",onChange:n=>m(n.target.value)}),r.jsx("label",{className:"form-check-label",htmlFor:"radioPeople",children:"People"})]}),r.jsxs("div",{className:"form-check form-check-inline",children:[r.jsx("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"radioFilms",value:"films",checked:i==="films",onChange:n=>m(n.target.value)}),r.jsx("label",{className:"form-check-label",htmlFor:"radioFilms",children:"Movies"})]})]})}),r.jsx("div",{className:"row mb-3",children:r.jsx("div",{className:"col",children:r.jsx("div",{className:"form-text",children:r.jsx("input",{type:"text",className:"form-control",id:"searchText",placeholder:"e.g. Chewbacca, Yoda, Boba Fett",value:s,onChange:n=>o(n.target.value)})})})}),r.jsx("div",{className:"row mb-3",children:r.jsx("div",{className:"col",children:r.jsx("div",{className:"d-grid gap-2",children:r.jsx("button",{type:"button",className:"btn btn-swstarter",onClick:l,disabled:t,children:t?"SEARCHING...":"SEARCH"})})})})]})})})})}function D(e){return e.title!==void 0&&typeof e.title=="string"}function I({item:e}){function t(s){const o=`Screen not implemented.
The clicked object is: ${JSON.stringify(s)}`;alert(o)}return r.jsxs("div",{className:"row align-items-center search-results-item",children:[r.jsx("div",{className:"col-8",children:r.jsx("h3",{className:"search-results-item-title",children:D(e)?e.title:e.name})}),r.jsx("div",{className:"col-4",children:r.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>t(e),children:"SEE DETAILS"})})]},e.uid)}function O({data:e,isLoading:t,error:s}){function o(){return s!=null&&s!==""?r.jsx("p",{children:s}):r.jsx("span",{})}function i(){return t?r.jsx("div",{className:"card-body-align-vertical",children:r.jsx("div",{className:"row",children:r.jsx("div",{className:"color-gray text-bold col-12",children:"Searching..."})})}):r.jsx("p",{})}function m(){return t?r.jsx("div",{}):e&&e.length>0?r.jsx("div",{className:"row",children:r.jsx("div",{className:"col-12",children:e.map(l=>r.jsx(I,{item:l}))})}):r.jsx("div",{className:"card-body-align-vertical",children:r.jsx("div",{className:"row align-items-end",children:r.jsxs("div",{className:"color-gray text-bold col-12",children:[r.jsx("p",{children:"There are zero matches."}),r.jsx("p",{children:"Use the form to search for people or movies"})]})})})}return r.jsx("div",{className:"card search-results",children:r.jsxs("div",{className:"card-body",children:[r.jsx("div",{className:"row",children:r.jsx("div",{className:"col-12",children:r.jsx("div",{className:"row search-results-title",children:r.jsx("div",{className:"col-12",children:r.jsx("h2",{children:"Results:"})})})})}),r.jsx(m,{}),r.jsx(i,{}),r.jsx(o,{})]})})}let v={};const y=e=>{if(!e||!e.query&&!e.mergeQuery)return"";const t=e.query??e.mergeQuery,s=e.mergeQuery!==void 0,o=l=>l===!0?"1":l===!1?"0":l.toString(),i=new URLSearchParams(s&&typeof window<"u"?window.location.search:"");for(const l in t){if(t[l]===void 0||t[l]===null){i.delete(l);continue}if(Array.isArray(t[l]))i.has(`${l}[]`)&&i.delete(`${l}[]`),t[l].forEach(n=>{i.append(`${l}[]`,n.toString())});else if(typeof t[l]=="object"){i.forEach((n,x)=>{x.startsWith(`${l}[`)&&i.delete(x)});for(const n in t[l])typeof t[l][n]>"u"||["string","number","boolean"].includes(typeof t[l][n])&&i.set(`${l}[${n}]`,o(t[l][n]))}else i.set(l,o(t[l]))}const m=i.toString();return m.length>0?`?${m}`:""},P=e=>{const t={...e??{}};for(const s in v)t[s]===void 0&&v[s]!==void 0&&(t[s]=v[s]);return t},a=e=>({url:a.url(e),method:"get"});a.definition={methods:["get","head"],url:"/api/films"};a.url=e=>a.definition.url+y(e);a.get=e=>({url:a.url(e),method:"get"});a.head=e=>({url:a.url(e),method:"head"});const N=e=>({action:a.url(e),method:"get"});N.get=e=>({action:a.url(e),method:"get"});N.head=e=>({action:a.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});a.form=N;const c=(e,t)=>({url:c.url(e,t),method:"get"});c.definition={methods:["get","head"],url:"/api/films/{id}"};c.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=P(e);const s={id:e.id};return c.definition.url.replace("{id}",s.id.toString()).replace(/\/+$/,"")+y(t)};c.get=(e,t)=>({url:c.url(e,t),method:"get"});c.head=(e,t)=>({url:c.url(e,t),method:"head"});const b=(e,t)=>({action:c.url(e,t),method:"get"});b.get=(e,t)=>({action:c.url(e,t),method:"get"});b.head=(e,t)=>({action:c.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});c.form=b;const $={get:a,getById:c},d=e=>({url:d.url(e),method:"get"});d.definition={methods:["get","head"],url:"/api/people"};d.url=e=>d.definition.url+y(e);d.get=e=>({url:d.url(e),method:"get"});d.head=e=>({url:d.url(e),method:"head"});const w=e=>({action:d.url(e),method:"get"});w.get=e=>({action:d.url(e),method:"get"});w.head=e=>({action:d.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});d.form=w;const u=(e,t)=>({url:u.url(e,t),method:"get"});u.definition={methods:["get","head"],url:"/api/people/{id}"};u.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=P(e);const s={id:e.id};return u.definition.url.replace("{id}",s.id.toString()).replace(/\/+$/,"")+y(t)};u.get=(e,t)=>({url:u.url(e,t),method:"get"});u.head=(e,t)=>({url:u.url(e,t),method:"head"});const S=(e,t)=>({action:u.url(e,t),method:"get"});S.get=(e,t)=>({action:u.url(e,t),method:"get"});S.head=(e,t)=>({action:u.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});u.form=S;const k={get:d,getById:u},h=e=>({url:h.url(e),method:"get"});h.definition={methods:["get","head"],url:"/api/stats"};h.url=e=>h.definition.url+y(e);h.get=e=>({url:h.url(e),method:"get"});h.head=e=>({url:h.url(e),method:"head"});const C=e=>({action:h.url(e),method:"get"});C.get=e=>({action:h.url(e),method:"get"});C.head=e=>({action:h.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});h.form=C;const Q={get:h},A={FilmsController:Object.assign($,$),PeopleController:Object.assign(k,k),StatsController:Object.assign(Q,Q)},F={Controllers:Object.assign(A,A)},H={Http:Object.assign(F,F)};class B{api;constructor(){this.api=q.create({headers:{"Content-Type":"application/json"}})}async getFilms(t){try{return(await this.api.get(`${H.Http.Controllers.FilmsController.get().url}?title=${t}`)).data}catch(s){throw console.error("Error fetching movies:",s),s}}}class _{api;constructor(){this.api=q.create({headers:{"Content-Type":"application/json"}})}async getPeople(t){try{return(await this.api.get(`${H.Http.Controllers.PeopleController.get().url}?name=${t}`)).data}catch(s){throw console.error("Error fetching people:",s),s}}}function U(){const[e,t]=p.useState({}),[s,o]=p.useState(""),[i,m]=p.useState(!1),l=new B,n=new _,x=async(j,E)=>{if(!j||!E){o("Please enter a text to search or choose between Movie or People.");return}m(!0),o("");try{E==="people"?n.getPeople(j).then(f=>{t(f)}).finally(()=>m(!1)):l.getFilms(j).then(f=>{t(f)}).catch(f=>{throw console.log(f),new Error(`error fetching ${j}!`)}).finally(()=>m(!1))}catch(g){g instanceof Error?o(g.message):o(`Error= ${g}`)}};return r.jsxs("div",{children:[r.jsx("nav",{className:"navbar bg-body-tertiary navbar-swstarter",children:r.jsx("div",{className:"container-fluid",children:r.jsx("span",{className:"navbar-brand h1 mb-0",children:"SWStarter"})})}),r.jsx("div",{className:"search-container container text-center",children:r.jsxs("div",{className:"row align-items-start",children:[r.jsx("div",{className:"col-4",children:r.jsx(R,{onClick:x,isLoading:i})}),r.jsx("div",{className:"col-8",children:e&&r.jsx(O,{data:e,isLoading:i,error:s})})]})})]})}export{U as default};
